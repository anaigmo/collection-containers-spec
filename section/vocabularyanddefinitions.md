## Vocabulary and definitions {#vocabulary}

This section introduces the classes, properties, and constants of the RML Containers and Collections specification.

### Classes

#### `rml:GatherMap`
Gather maps are term maps that use [`rml:gather`](#rml-gather) and [`rml:gatherAs`](#rml-gatheras) to generate collections and containers from a list of term maps. 

If a gather map has no template or term type directive, at each iteration it is assumed to be generating a blank node that is the head of the collection or container.

* A `rml:GatherMap` MUST have exactly one [`rml:gather`](#rml-gather) property.
* A `rml:GatherMap` MUST have exactly one [`rml:gatherAs`](#rml-gatheras) property.
* A `rml:GatherMap` MAY have exactly one [`rml:strategy`](#rml-strategy) property.

### Properties

#### `rml:gather`

The `rml:gather` informs the RML processor where the terms of a collection or container come from. This property relates a gather map with a non-empty list of term maps. 
That list of term maps may contain other gather maps, which means that this will generate nested containers and collections. One is not limited to nesting only containers or collections, both containers and collections can be mixed.

* The domain of `rml:gather` is [`rml:GatherMap`](#rml-gathermap).
* The range of `rml:gather` is a non-empty list (rdf:List) of `rr:TermMap` instances. In particular, this list may include instances of [`rml:GatherMap`](#rml-gathermap) thus allowing for nested gather maps.


#### `rml:strategy`

Declaring an `rml:strategy` on a gather map informs the processor about how to create collections and containers when faced with **multi-valued term maps**.
This specification defines [`rml:Append`](#rml-append) and [`rml:CartesianProduct`](#rml-cartesianproduct) as instances of rml:Strategy. 

In the [`rml:Append`](#rml-append) strategy, the sets of RDF terms generated by each term map of the gather map are simply appended to the collection (respectively container) being constructed. Thus, only one collection (respectively container) is generated.

Conversely, in the [`rml:CartesianProduct`](#rml-cartesianproduct) strategy, the gather map generates collections (respectively containers) each containing one RDF term generated by each term map of the gather map. In other words, it carries out a cartesian product between the terms generated by each term map, thus constructing as many collections (respectively containers) as the product of the number of RDF terms from each term map. 

A gather map does not need to specify a strategy, **the default strategy is `rml:Append`**.

#### `rml:gatherAs`

The property `rml:gatherAs` relates a gather map with the desired result type: a type of container or collections.

* The domain of `rml:gatherAs` is [`rml:GatherMap`](#rml-gathermap).
* The range of `rml:gatherAs` is one of the following: `rdf:Seq`, `rdf:Bag`, `rdf:Alt`, `rdf:List`.

#### `rml:allowEmptyListAndContainer`
The range of `rml:allowEmptyListAndContainer` is a `xsd:boolean` and is by default false. This predicate is to be used alongside [`rml:gather`](#rml-gather) and [`rml:gatherAs`](#rml-gatheras). When true and an [`rml:gather`](#rml-gather) does not yield any element, then the gather map will generate `rdf:nil` for an RDF collection, or a resource with no members for an RDF container.

* The domain of `rml:allowEmptyListAndContainer` is [`rml:GatherMap`](#rml-gathermap).
* The range of `rml:allowEmptyListAndContainer` is `xsd:boolean`.

### Constants

#### `rml:Append`

`rml:Append` is an instance of `rml:Strategy`. 
Used as the object of property [`rml:strategy`](rml-strategy), it informs the processor that the sets of RDF terms generated by each term map of the gather map are to be appended within the collection or container. The order os that in which the term maps are declared in the gather map. See the example below.


For the input document:
```json
  { 
    "ids": [ "1" , "2" , "3" ],
    "values": [ "4" , "5" ] 
  },
```

The following term map:
```turtle
    rr:objectMap [
        rml:gather ( [ rml:reference "ids.*" ] [ rml:reference "values.*" ]) ;
        rml:gatherAs rdf:List ;
        rml:strategy rml:Append;   # this is the default strategy
    ] ;
```

would generate a list by appending the terms produced by the two term maps in the gather map:
```turtle
  ("1" "2" "3" "4" "5" )
```


#### `rml:CartesianProduct`

`rml:CartesianProduct` is an instance of `rml:Strategy`. 
Used as the object of property [`rml:strategy`](rml-strategy), it informs the processor that the RDF terms generated by each term map of the gather map are to be grouped (in the constructed collection or container) by doing a cartesian product of these terms.
Therefore, this constructs as many collections or containers as the product of the number of terms from each term map.
See the example below.

For the input document:
```json
  { 
    "ids": [ "1" , "2" , "3" ],
    "values": [ "4" , "5" ] 
  },
```

The following term map:
```turtle
    rr:objectMap [
        rml:gather ( [ rml:reference "ids.*" ] [ rml:reference "values.*" ]) ;
        rml:gatherAs rdf:List ;
        rml:strategy rml:CartesianProduct;
    ] ;
```

would generate 3*2 = 6 lists by grouping the terms produced by the two term maps in the gather map:
```turtle
("1" "4") ("1" "5") 
("2" "4") ("2" "4")
("3" "4") ("3" "4")
```



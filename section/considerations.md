## Considerations {#considerations}

### Identifying collections and containers

TODO: revisit w.r.t. new changes

An `rr:template` or `rml:reference` may be provided for the generation of blank node IDs (`rr:BlankNode`) or IRIs (`rr:IRI`). In some cases, there are challenges when identifiers are generated. The challenge generating identifiers for collections and containers: one needs to be careful when a gather map uses multi-valued references in the template or generates multiple collections and containers:

* In the former, the gather map must return “deep” copies of collections. This is to avoid only generating a new IRI or blank node identifier for the first cons-pair and hence having multiple lists sharing the same sublist.

If no `rr:template` or `rml:reference` is provided for generating blank node IDs (`rr:BlankNode`) or IRIs (`rr:IRI`), then each iteration generates a new blank node identifier for the collection or container.


<!--
### Gather maps yielding the same identifier during different iterations

If term maps were to generate the same identifier for collections and containers, this might result in valid RDF but ill-formed RDF collections and containers. We identify two cases:

*  A gather map yields the same identifier during two iterations. The nature of the resource (collection or container) remains the same, and values are appended.

* Two gather maps yield the same identifier during two iterations. The nature of the resources generated by these gather maps may be different, resulting in resources of two different types (e.g., rdf:List and rdf:Bag). An RML processor will produce those as this is valid RDF, although the respective lists and containers are not well-formed.
-->

### The use of `rr:column`

In RML, `rr:column` is considered a subproperty of `rml:reference`. One can still avail of `rr:column` when creating mappings for relational databases. The use of `rr:column` is not discouraged, but one is encouraged to favor `rml:reference`. 


### Using a `rml:GatherMap` in various types of term map

Although most examples demonstrate the use of a gather map in the context of an object map, a gather map is a regular term map.
As such, it can be used in other types of term maps such as a subject or predicate map.

Term maps generate single RDF terms to be used as the terms of RDF triples.
If such a term map generates a collection or container by means of a gather map, the term retained to form an RDF triple is the head node of the collection or container.
In the case of an RDF list, this is the node that is the subject of the first `rdf:first` predicate.

The [examples section](#gatherinsubject) demonstrates how a gather map can be used within a subject map.

### Generating lists and containers based on multiple iterations

* TODO: if there are multiple iterations generating the same list/container, then if it already exists, we append.
* TODO: what if there is a combination of this + multi valued
